function beforeSend(a){if($("[data-contactv2='"+a+"']").get(0).checkValidity()){var t=$(".g-recaptcha").attr("data-size");void 0!==t&&!1!==t&&null!==t?grecaptcha.execute():send(a)}else $("#button_submit_form_contactv2_"+a).click()}function send(formId){var form=$("[data-contactv2='"+formId+"']"),invalidFields=[],oldDisplay=$("#button_button_form_contactv2_"+formId).css("display");if($("#button_button_form_contactv2_"+formId).css("display","none"),form.find("[data-contactv2-required]").each((function(){var a=form.find($(this).data("contactv2Required"));$(this).find('input[type="checkbox"]:checked').length>0?a.hide():(a.show(),invalidFields.push(a),$("#button_button_form_contactv2_"+formId).css("display",oldDisplay))})),form.find(".g-recaptcha").length){var recaptchaError=form.find("#contact-captcha-error");form.find("#g-recaptcha-response").val().length>0||$.contactv2.isMobile>0?recaptchaError.hide():(recaptchaError.show(),invalidFields.push("contact-captcha-error"),$("#button_button_form_contactv2_"+formId).css("display",oldDisplay))}if(invalidFields.length){var _attr=$(".g-recaptcha").attr("data-size");return void 0!==_attr&&!1!==_attr&&null!==_attr&&grecaptcha.reset(),void $("#button_button_form_contactv2_"+formId).css("display",oldDisplay)}$("[data-contactv2='"+formId+"']").append('<input type="hidden" id="processingForm" value="'+formId+'"/>');let formDataValues=new FormData(document.querySelector("[data-contactv2='"+formId+"']"));async function contactFetchUpload(a,t,e,o,n,r){let c=new FormData;return c.append("contactID",e),c.append("file",t),c.append("res",JSON.stringify(o)),c.append("id",n),c.append("name",r),c.append("g-recaptcha-response",form.find("#g-recaptcha-response").val()),c.append("sec",form.find("#sec").val()),await fetch(a,{method:"POST",headers:new Headers,mode:"cors",cache:"default",body:c})}async function doUploads(a,t,e){let o=a.find('input[type="file"]'),n=[];return o.each((function(){this.files.length>0&&n.push(contactFetchUpload(a.data("action").replace(/submit/,"submitUpload"),this.files[0],t,e,this.id,this.name))})),await Promise.all(n)}async function startUpload(a,t,e){return await doUploads(a,t,e).then((a=>a.map((a=>a.json())))).then((a=>(a.forEach((a=>{a.then((a=>{}))})),a))).catch((a=>{console.error(a)}))}async function waitResults(a){return await Promise.all(a)}$.ajax({url:form.data("action"),type:"POST",data:formDataValues,cache:!1,contentType:!1,processData:!1,error:function(){hideFormAndShowMessage($("[data-contactv2]"),$.contactv2.i18n.send_error_server+"<br/>"+$.contactv2.i18n.send_try_later)},success:function(res){if(!res)return hideFormAndShowMessage($("[data-contactv2]"),$.contactv2.i18n.send_error_server+"<br/>"+$.contactv2.i18n.send_try_later),void $("#processingForm").remove();{let data=[];startUpload(form,formId,res).then((results=>{waitResults(results).then((values=>{console.log("values"),console.log(values);let formData=new FormData;values.length>0?(values.map(((v,index)=>{0===index?data=v.data:Object.entries(v.data).map(((d,indexData)=>{let oldValue=eval("data."+d[1].id+".value");if(void 0!==d[1].value&&""!==d[1].value&&(void 0===oldValue||""===oldValue||oldValue!==d[1].value)){let expr;"object"==typeof d[1].value&&(d[1].value=Object.values(d[1].value).join(",")),eval("data."+d[1].id+".value = '"+d[1].value.replace(/'/gi,"\\'")+"'");let newValue=eval("data."+d[1].id+".value")}}))})),console.log(data),formData.append("contactID",formId),formData.append("data",JSON.stringify(data)),formData.append("uploads",values.map((a=>a.uploads[0])))):formData=formDataValues;let myHeaders,myInit={method:"POST",headers:new Headers,mode:"cors",cache:"default",body:formData};fetch(form.data("action").replace(/submit/,"sendMail"),myInit).then((a=>{console.log(a),"undefined"!=typeof gtag_report_conversion_form_sending&&gtag_report_conversion_form_sending(),$.contactv2.redirect?window.location.href=$.contactv2.redirect:(hideFormAndShowMessage($("[data-contactv2='"+$("#processingForm").val()+"']"),$.contactv2.i18n.send_success),$("#processingForm").remove())})).catch((a=>{console.error(a)}))}))})).catch((a=>{console.error(a)}))}}})}function hideFormAndShowMessage(a,t){a.css("display","none");var e=$("#contactv2-confirm-"+a.data("contactv2"));e.html(t),e.show()}$.contactv2={redirect:"",AWConversionId:"",AWFormSendingLabel:"",isMobile:0,i18n:{send_try_later:"",send_error:"",send_error_server:"",send_success:""}},$(document).ready((function(){$(".form-submit-button").click((function(){$(this).closest(".contactForm").addClass("submitted")}))}));